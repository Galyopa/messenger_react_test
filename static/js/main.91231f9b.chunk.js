(this.webpackJsonpMessenger_rect_test=this.webpackJsonpMessenger_rect_test||[]).push([[0],{38:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){},44:function(e,t,s){},45:function(e,t,s){},46:function(e,t,s){"use strict";s.r(t);var a=s(23),c=s(11),n=s(7),r=s(2),i=s(13),o=s.n(i),l=c.c,u=s(5),m=s(0),d=s(48),b=s(14),h=Object(b.b)({name:"chats",initialState:[{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37341",userImg:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80",username:"Alice Freeman",messageHistory:[{chatId:"a5c49ba2-494b-4fc9-95fb-71caaeb37341",messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37342",text:"yoy are the worst",isAuthor:!1,date:"Aug 17, 2022, 3:34:19 PM"},{chatId:"a5c49ba2-494b-4fc9-95fb-71caaeb37341",messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37343",text:"yes i know",isAuthor:!0,date:"Aug 17, 2022, 3:34:21 PM"}]},{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37140",userImg:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",username:"Josefina",messageHistory:[{chatId:"a5c49ba2-494b-4fc9-95fb-71caaeb37140",messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37168",text:"We are losing money! Quick!",isAuthor:!1,date:"Aug 17, 2022, 3:34:21 PM"}]},{userId:"a5c49ba2-494b-4fc9-95fb-71caaeb37141",userImg:"https://upload.wikimedia.org/wikipedia/commons/7/76/Boris_Johnson_official_portrait_%28cropped%29.jpg",username:"\u0411\u043e\u0440\u0438\u0441 \u0414\u0436\u043e\u043d\u0441\u043e\u043d\u044e\u043a",messageHistory:[{chatId:"a5c49ba2-494b-4fc9-95fb-71caaeb37141",messageId:"a5c49ba2-494b-4fc9-95fb-71caaeb37154",text:"\u0414\u043e\u0431\u0440\u0438\u0439 \u0434\u0435\u043d\u044c, everebody!",isAuthor:!1,date:"Aug 17, 2022, 3:35:21 PM"}]}],reducers:{addMessageToHistory:function(e,t){var s=e.find((function(e){return e.userId===t.payload.chatId}));null===s||void 0===s||s.messageHistory.push(t.payload)}}}),j=h.reducer,g=h.actions.addMessageToHistory,f="https://api.chucknorris.io/";function x(e){return new Promise((function(t){setTimeout(t,e)}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return s&&(a.body=JSON.stringify(s),a.headers={"Content-Type":"application/json; charset=UTF-8"}),x(1e3).then((function(){return fetch(f+e,a)})).then((function(e){return e.json()}))}var O=function(e){return p(e)},_=(s(38),s(1)),v=function(e){var t=e.chatId,s=Object(c.b)(),a=Object(m.useState)(""),n=Object(u.a)(a,2),r=n[0],i=n[1];return Object(_.jsxs)("form",{className:"sendForm",onSubmit:function(e){if(e.preventDefault(),r.trim()&&t){var a={chatId:t,messageId:Object(d.a)(),text:r.trim(),isAuthor:!0,date:(new Date).toString()};s(g(a)),O("jokes/random").then((function(e){var a={chatId:t,messageId:Object(d.a)(),text:e.value,isAuthor:!1,date:(new Date).toString()};s(g(a))}))}i("")},children:[Object(_.jsx)("label",{className:"sendForm__label",htmlFor:"message",children:Object(_.jsx)("input",{className:"sendForm__input",autoComplete:"off",type:"text",value:r,name:"message",id:"message",placeholder:"Message",onChange:function(e){return i(e.target.value)}})}),Object(_.jsx)("button",{className:"sendForm__button",type:"submit",children:"Send"})]})},y=(s(40),{dateStyle:"short",timeStyle:"medium"}),N=function(){var e=Object(r.i)().userId,t=l((function(e){return e.chats})).find((function(t){return t.userId===e}));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"messages__top",children:[Object(_.jsx)("img",{className:"messages__img user-icon",src:null===t||void 0===t?void 0:t.userImg,alt:null===t||void 0===t?void 0:t.username}),Object(_.jsx)("p",{className:"messages__username",children:null===t||void 0===t?void 0:t.username})]}),Object(_.jsx)("div",{className:"messages__center",children:Object(_.jsx)("ul",{className:"messages__list",children:null===t||void 0===t?void 0:t.messageHistory.map((function(e){return Object(_.jsx)("li",{className:"messages__item",children:Object(_.jsxs)("div",{className:o()("messages__content",{"messages__content--author":e.isAuthor}),children:[Object(_.jsx)("p",{children:e.text}),Object(_.jsx)("p",{className:"messages__date",children:new Date(e.date).toLocaleString("en-US",y)})]})},e.messageId)}))})}),Object(_.jsx)("div",{className:"messages__bottom",children:Object(_.jsx)(v,{chatId:e})})]})},I=s(15),w=function(){var e=Object(n.c)(),t=Object(u.a)(e,2),s=t[0],a=t[1],c=s.get("query")||"";return Object(_.jsx)("label",{className:"chats__label",children:Object(_.jsx)("input",{className:"chats__search",value:c,onChange:function(e){return a({query:e.target.value})},type:"text",placeholder:"Search"})})},S=function(e){return o()("chats__link",{"chats__link-active":e.isActive})},H={timeStyle:"short"},A=function(e){var t=e.chat,s=t.messageHistory.length-1,a=new Date(t.messageHistory[s].date).toLocaleString("en-US",H),c=t.messageHistory[s].text;return Object(_.jsx)("li",{className:"chats__item",children:Object(_.jsxs)(n.b,{className:S,to:t.userId,children:[Object(_.jsx)("div",{className:"chats__img-wrapper",children:Object(_.jsx)("img",{className:"chats__img user-icon",src:t.userImg,alt:t.username,width:"50",height:"50"})}),Object(_.jsxs)("div",{className:"chats__content",children:[Object(_.jsx)("h2",{className:"chats__username",children:t.username}),Object(_.jsx)("p",{className:"chats__last-message",children:c}),Object(_.jsx)("span",{className:"chats__date",children:a})]})]})},t.userId)},M=(s(41),function(){var e=Object(n.c)(),t=Object(u.a)(e,1)[0],s=l((function(e){return e.chats})),a=t.get("query"),c=Object(I.a)(s);if(c.sort((function(e,t){return new Date(t.messageHistory[t.messageHistory.length-1].date).getTime()-new Date(e.messageHistory[e.messageHistory.length-1].date).getTime()})),a){var i=a.toLocaleLowerCase();c=s.filter((function(e){return[e.username,e.messageHistory.map((function(e){return e.text}))].join("\n").toLocaleLowerCase().includes(i)}))}return Object(_.jsxs)("main",{className:"page__main",children:[Object(_.jsxs)("div",{className:"chats",children:[Object(_.jsxs)("div",{className:"chats__top",children:[Object(_.jsx)("img",{className:"chats__user-icon user-icon",src:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=580&amp",alt:"John Doe",width:"50",height:"50"}),Object(_.jsx)(w,{})]}),Object(_.jsx)("div",{className:"chats__bottom",children:Object(_.jsx)("ul",{className:"chats__list",children:c.map((function(e){return Object(_.jsx)(A,{chat:e})}))})})]}),Object(_.jsx)("div",{className:"messages",children:Object(_.jsx)(r.b,{})})]})}),k=function(){return Object(_.jsx)("div",{className:"page__container",children:Object(_.jsxs)(r.e,{children:[Object(_.jsxs)(r.c,{path:"/",element:Object(_.jsx)(M,{}),children:[Object(_.jsx)(r.c,{index:!0,element:Object(_.jsx)("div",{className:"messages__empty",children:Object(_.jsx)("p",{children:"Select a chat"})})}),Object(_.jsx)(r.c,{path:":userId",element:Object(_.jsx)(N,{})})]}),Object(_.jsx)(r.c,{path:"home",element:Object(_.jsx)(r.a,{to:"/"})}),Object(_.jsx)(r.c,{path:"*",element:Object(_.jsx)("h1",{children:"Page not found"})})]})})},D=s(26),J=s(20),T=s.n(J),F="redux";function C(){return(C=Object(D.a)(T.a.mark((function e(t){var s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=JSON.stringify(t),localStorage.setItem(F,s)}catch(a){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=Object(b.a)({devTools:!0,reducer:{chats:j},preloadedState:function(){try{var e=localStorage.getItem(F);if(!e)return;return JSON.parse(e)}catch(t){return}}()});s(44),s(45);L.subscribe((function(){!function(e){C.apply(this,arguments)}(L.getState())})),Object(a.createRoot)(document.getElementById("root")).render(Object(_.jsx)(n.a,{children:Object(_.jsx)(c.a,{store:L,children:Object(_.jsx)(k,{})})}))}},[[46,1,2]]]);
//# sourceMappingURL=main.91231f9b.chunk.js.map